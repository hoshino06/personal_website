## LaTeX入門 {:class=page_title}

LaTeXは文書作成のためのフリーソフトウェアです.
ラテックやラテフと読みます. 単にテフ(TeX)と呼ぶこともあります. 
Wordなどに比べて, 参考文献や図の番号を容易に自動化できることや, 数式を含んでもきれいな文書を作成できるため, 本研究室が対象とする分野では, 学会原稿や論文はLaTeXで作成することがスタンダードになっています. 
卒業論文や研究室内の発表資料もこれで作成してもらっているので, 早めに慣れておくのがよいでしょう. 

### インストール

研究室のLinux端末にはインストール済みのはずです. 研究室内で試してみる場合は[LaTeXによる文書作成の流れ](#tex_overview)に進んでください. 

自分のPCにインストールする場合には, [TeXLive](https://www.tug.org/texlive/index.html){:target='blank_'}の使用をおすすめしています. 
インストールの手順についてはTex Wikiのページ([こちら](https://texwiki.texjp.org/?TeX%20Live#w628bee6){:target='blank_'})が参考になります.
手順の中でミラーサーバを選ぶことになります.
基本的にはどれを選んでもよいのですが, 運が悪いときちんと動作していない時間帯もあったりするので, 作業が一向に進まないときは違うもので試してみてください. 

### LaTeXによる文書作成の流れ {:id='tex_overview'}

LaTeXでは直接文書を編集するのではなく, 適切なソースコード(TeXファイル)を作成してから, それをコンパイルすることで目的の文書(pdfファイル)を作成します.

TeXファイル自体は普通のテキストファイルなので, 基本的にはどんなエディタを使ってもかまいません. WindowsではTeXWorks, MacではTeXShopというソフトを使うと, TeXファイルを編集しながらコンパイルも手軽にできるのでおすすめです. 少し設定をすれば Visual Studio Code でも扱えます. Linux端末ではemacsを使うのがおすすめです. 

### TeXファイルの書き方

LaTeXでは文書の「中身」と「見た目」を別々に管理します. 
中身に相当する部分は主に**「TeXファイル(.tex)」**に書き, 見た目に関する部分は「クラスファイル(.cls)」や「スタイルファイル(.sty)」に書きます.
皆さんがまず注力すべきはTeXファイルの方で, 以下ではその書き方について説明します. 
クラスファイルやスタイルファイルには, 文書のレイアウト設定が記述されるとともに, TeXファイルを書く際に便利な「コマンド」が色々と用意されています.
皆さんは, 適宜これらのファイルをTeXファイルに読み込み, 種々のコマンドを駆使しながら文章を作成します. 

さて, [LaTexプロジェクトのページ](https://www.latex-project.org/about/)では下記のTeXファイルの例が紹介されています(ただし, コメントはこちらで追記). 

    % プリアンブル
    \documentclass{article} % この文書のクラスファイルとして「article.cls」を指定
    \title{Cartesian closed categories and the price of eggs} % 文書のタイトルを指定 
    \author{Jane Doe} %著者を指定
    \date{September 1994} %日付を指定
    % 本文
    \begin{document}
       \maketitle
       Hello world!
    \end{document}

上記の1から4行目は, **プリアンブル(preamble)**と呼ばれる部分で, 文書を書き始める前の準備をする部分です.
この部分で文書のクラスファイルを指定するとともに, 後にコマンドを実行するための前置きをします.
この例では, タイトル, 著者および日付を設定しています.
これ以外にも, この部分で追加のスタイルファイルを読み込んだり, 自作のコマンドを定義しておくことが可能です. 

5行目から8行目が文書の内容に関する部分です. `\begin{document}`と`\end{document}`で囲まれた所に内容を記述します.
ここでは, まず\maketitleコマンドを使って文書のタイトル部分を表示させたのち, Hello world!という内容を記述しています.
なお, \maketitleコマンドの実体はarticle.clsに定義されています.
そこには\title, \author, \dateなどで指定された内容がどのように表示されるのかが記述されています.


### クラスファイルの指定

上記の例では, article.clsというクラスファイルが指定されていましたが, \documentclass{}のところで他のクラスファイルを指定することもできます. 特に, 日本語を扱いたい場合には, それに対応したクラスファイルが必要です. 
例えば, TeX Liveには[jsarticle](https://oku.edu.mie-u.ac.jp/~okumura/jsclasses/) という日本語対応のクラスファイルが含まれているため, 1行目を\documentclass{jsarticle}と書き換えるだけで日本語の文書を作成できるようになります.

また, クラスファイルには適宜オプションを与えることができます. 例えば, 下記のように書くことができます.
"10pt"は文字サイズを10ポイントに指定, "a4paper"はA4用紙を指定, "twocolumn"は二段組みを指定するためのオプションです. 
なお, オプションの種類は使用するクラスファイルによって異なるので, それぞれの使い方を調べてみてください. 

    \documentclass[10pt,a4paper,twocolumn]{jsarticle}


研究成果を報告する場合, 発表先の学会が指定するフォーマットに従って原稿を書く必要があります.
多くの場合, そのフォーマットに沿うクラスファイルが学会側から提供されているので, それを使用してください.
使用頻度が高いと思われるものを以下に列挙します. 

 - [電子情報通信学会](http://www.ieice.org/ftp/)
 - [システム制御情報学会](https://www.iscie.or.jp/pub/journal#submission)
 - [電気学会](https://www.iee.jp/pub/post/)
 

### パッケージの利用

TeXファイルにスタイルファイルを読み込むことで, LaTeXの機能を拡張することができます.
例えば, amsmathパッケージ(amsmath.sty)を利用したい場合には, TeXファイルのプリアンブルに下記の一文を追記します. 
(実際には, amsmath.styに記述された内容に従って, スタイルファイル以外のファイルも読み込まれる場合があります.
このようなファイル群全体を指してパッケージという言葉が使われます.)

    \usepackage{amsmath}

パッケージを読み込むことで種々のコマンドが使用可能になり, 色々な見た目の文章を作ることができるようになります.
以下ではよく使うパッケージとその使い方について紹介します.

#### 数式(amsmathパッケージ)

amsmathパッケージ(amsmath.sty)は, アメリカ数学会(American Mathematical Society; AMS)が開発した, 数式に関するコマンドや環境を提供するパッケージです.

#### 図の挿入方法(graphicxパッケージの利用)

図を挿入する際には, graphicxというパッケージを使います. プリアンブルには下記のように記述します.

    \usepackage[dvipdfmx]{graphicx} %dvipdfmxオプションはptex2pdfを使う場合に必要

論文に図を挿入するときは, eps形式の図を作成して, その図の保存場所をtexファイルで指定します.
図を保存する場所は, texファイルと同じフォルダでもよいですが, figというフォルダを作成してその中に入れるのがよいでしょう. texファイルには下記のように記述します.

    \begin{figure}[t] % tは図をページの上端に配置するという意味
      \centering
      \includegraphics[width=0.95\hsize]{./fig/図のファイル名}
      \caption{図の説明}
      \label{図を参照するためのラベル}
    \end{figure}


#### コマンドの定義と研究室内のルール

    \newcommand{\dd}{\mathrm{d}} % 微分作用素のd
    \newcommand{\ii}{\mathrm{i}} % 複素数のi
    \newcommand{\jj}{\mathrm{j}} % 複素数のj

    \newcommand{\figref}[1]{Fig.\,\ref{#1}}
    \newcommand{\eqref}[1]{Eq.\,\ref{#1}}

<!---
なお, 上記のマクロは北野正雄先生が作成したスタイルファイルを参考にしています.
[北野先生のページ](http://kir018304.kir.jp/nc/htdocs/?page_id=21)
-->


### 文書作成の際に気を付ける点

* 句点と読点は「半角+スペース」にする

* 数式中で「変数でない文字」は`\mathrm{}`でローマン体にする

* 物理量の数字と単位の間には`\,`でスペースを入れる



